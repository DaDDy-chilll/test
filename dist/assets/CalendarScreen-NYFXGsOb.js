import{E as e,h as D,G as L,r as g,K as O,L as T,H as I,I as _}from"./index-DmKZLtA3.js";import{t as d,c as f,s as v,f as m,E as H}from"./EventListItem-DpLK2ePU.js";import{u as Y}from"./useFetch-BVvl8Db8.js";function M(s,t){const n=d(s);if(isNaN(t))return f(s,NaN);if(!t)return n;const a=n.getDate(),o=f(s,n.getTime());o.setMonth(n.getMonth()+t+1,0);const l=o.getDate();return a>=l?o:(n.setFullYear(o.getFullYear(),o.getMonth(),a),n)}function A(s){return f(s,Date.now())}function K(s,t){const n=v(s),a=v(t);return+n==+a}function W(s){const t=d(s),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function B(s,t){const n=d(s.start),a=d(s.end);let o=+n>+a;const l=o?+n:+a,i=o?a:n;i.setHours(0,0,0,0);let p=1;const u=[];for(;+i<=l;)u.push(d(i)),i.setDate(i.getDate()+p),i.setHours(0,0,0,0);return o?u.reverse():u}function P(s){const t=d(s);return t.setDate(1),t.setHours(0,0,0,0),t}function x(s){return d(s).getDay()}function N(s){return K(s,A(s))}function R(s,t){return M(s,-t)}const z=({day:s,todaysEvents:t,handleClick:n})=>e.jsxs("div",{className:D("h-20 flex flex-col rounded-md items-center justify-center active:scale-90 transition-all duration-100 cursor-pointer",{"border border-red-400 bg-[#E5D5D9]":N(s),"bg-[#E5D5D9]":!N(s)}),onClick:()=>n(t),children:[e.jsx("div",{className:D("w-8 h-8 flex items-center justify-center mx-auto"),children:m(s,"d")}),t.length!==0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"bg-primaryColor w-2 h-2 rounded-full"}),t.length>1&&e.jsxs("p",{className:"text-xs text-primaryColor",children:["+",t.length]})]})]}),J=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Z=()=>{const{token:s}=L(r=>r.auth),[t,n]=g.useState(new Date),[a,o]=g.useState([]),l=P(t),i=W(t),{data:p,isLoading:u,isError:$,isSuccess:G,error:q}=Y({endpoint:O.EVENTS,token:s,key:"events"}),y=p||[],w=()=>{n(M(t,1))},b=()=>{n(R(t,1))},C=B({start:l,end:i}),k=x(l)===0?6:x(l)-1,F=x(i)===0?0:7-x(i),E=g.useMemo(()=>y.reduce((r,c)=>{const h=m(new Date(c.date),"yyyy-MM-dd");return r[h]||(r[h]=[]),r[h].push(c),r},{}),[y]),S=r=>{o(r)};return e.jsxs(e.Fragment,{children:[u&&e.jsx(T,{isLoading:u,className:"h-[calc(100vh-68px)]"}),e.jsxs(I.div,{variants:V,initial:"initial",animate:"animate",exit:"exit",className:"w-full  grid grid-cols-3 gap-x-4 p-4",children:[e.jsxs("div",{className:"col-span-2 rounded-lg bg-[#F0F0F0] p-4 shadow-lg",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[e.jsx("button",{onClick:b,className:"bg-primaryColor text-white p-2 rounded hover:bg-primaryColor/30",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})})}),e.jsx("h2",{className:"text-center text-xl",children:m(t,"MMMM yyyy")}),e.jsx("button",{onClick:w,className:"bg-primaryColor text-white p-2 rounded hover:bg-primaryColor/30",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})})})]})}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[J.map(r=>e.jsx("div",{className:"font-normal py-2 text-center bg-[#F6D5D5] text-secondaryColor rounded-md",children:r},r)),Array.from({length:k}).map((r,c)=>e.jsx("div",{className:"p-2 bg-[#E5D5D9] rounded-md text-center "},`empty-${c}`)),C.map((r,c)=>{const h=m(r,"yyyy-MM-dd"),j=E[h]||[];return e.jsx(z,{day:r,todaysEvents:j,handleClick:()=>S(j)},c)}),Array.from({length:F}).map((r,c)=>e.jsx("div",{className:"p-2 bg-[#E5D5D9] rounded-md text-center "},`empty-${c}`))]})]}),e.jsxs("div",{className:"col-span-1 px-4 rounded-lg bg-[#F0F0F0] h-full",children:[e.jsxs("h2",{className:"text-center text-base my-6",children:["~~",_.meetings]}),e.jsx("div",{className:"text-end",children:e.jsxs("select",{className:"bg-primaryColor text-white p-2 rounded-md text-xs",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"JLPT N4",children:"JLPT N4"})]})}),e.jsx("div",{className:"overflow-y-auto my-5 h-[calc(100vh-250px)] flex flex-col gap-2",children:a.length>0?a.map((r,c)=>e.jsx(H,{event:r},c)):e.jsx("p",{className:"text-center text-gray-500",children:"No events for this day"})})]})]})]})},V={initial:{opacity:0},animate:{opacity:1,transition:{duration:.2}},exit:{opacity:0,transition:{duration:.2}}};export{Z as default};
