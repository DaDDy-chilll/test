import{E as e,h as N,G as A,r as y,U as _,T as P,H,I as Y}from"./index-NtpdcA5x.js";import{t as u,c as f,s as M,f as d,E as w}from"./EventListItem-C2bY01z3.js";import{u as B}from"./useFetch-BYkp2LIp.js";function C(t,s){const n=u(t);if(isNaN(s))return f(t,NaN);if(!s)return n;const a=n.getDate(),i=f(t,n.getTime());i.setMonth(n.getMonth()+s+1,0);const l=i.getDate();return a>=l?i:(n.setFullYear(i.getFullYear(),i.getMonth(),a),n)}function R(t){return f(t,Date.now())}function V(t,s){const n=M(t),a=M(s);return+n==+a}function W(t){const s=u(t),n=s.getMonth();return s.setFullYear(s.getFullYear(),n+1,0),s.setHours(23,59,59,999),s}function J(t,s){const n=u(t.start),a=u(t.end);let i=+n>+a;const l=i?+n:+a,c=i?a:n;c.setHours(0,0,0,0);let g=1;const h=[];for(;+c<=l;)h.push(u(c)),c.setDate(c.getDate()+g),c.setHours(0,0,0,0);return i?h.reverse():h}function z(t){const s=u(t);return s.setDate(1),s.setHours(0,0,0,0),s}function p(t){return u(t).getDay()}function b(t){return V(t,R(t))}function U(t,s){return C(t,-s)}const $=({day:t,todaysEvents:s,handleClick:n})=>{const a=()=>n(s);return e.jsxs("div",{className:N("h-20 flex flex-col rounded-md items-center justify-center active:scale-90 transition-all duration-100 cursor-pointer ",{"border border-red-400 bg-[#E5D5D9]":b(t),"bg-[#E5D5D9]":!b(t)}),onClick:a,children:[e.jsx("div",{className:N("w-8 h-8 flex items-center justify-center mx-auto"),children:d(t,"d")}),s.length!==0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"bg-primaryColor w-2 h-2 rounded-full"}),s.length>1&&e.jsxs("p",{className:"text-xs text-primaryColor",children:["+",s.length]})]})]})};var E=(t=>(t.APPLICANTS="applicants",t.APPLICANT_DETAIL="applicantDetail",t.JOBS="jobs",t.USERS="users",t.EVENTS="events",t))(E||{});const G=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],se=()=>{const{token:t}=A(r=>r.auth),[s,n]=y.useState(new Date),[a,i]=y.useState([]),l=z(s),c=W(s),{data:g,isLoading:h,isError:X,isSuccess:Z,error:K}=B({endpoint:_.EVENTS,token:t,key:E.EVENTS}),j=g||[],S=d(new Date,"yyyy-MM-dd"),D=y.useMemo(()=>j.reduce((r,o)=>{const x=d(new Date(o.date),"yyyy-MM-dd");return r[x]||(r[x]=[]),r[x].push(o),r},{}),[j]),m=D[S]||[],k=()=>n(C(s,1)),T=()=>n(U(s,1)),F=J({start:l,end:c}),L=p(l)===0?6:p(l)-1,O=p(c)===0?0:7-p(c),I=r=>i(r);return e.jsxs(e.Fragment,{children:[h&&e.jsx(P,{isLoading:h,className:"h-[calc(100vh-68px)]"}),e.jsxs(H.div,{variants:q,initial:"initial",animate:"animate",exit:"exit",className:"w-full  grid grid-cols-3 gap-x-4 p-4",children:[e.jsxs("div",{className:"col-span-2 rounded-lg bg-[#F0F0F0] p-4 shadow-lg",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[e.jsx("button",{onClick:T,className:"bg-primaryColor text-white p-2 rounded hover:bg-primaryColor/30",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})})}),e.jsx("h2",{className:"text-center text-xl",children:d(s,"MMMM yyyy")}),e.jsx("button",{onClick:k,className:"bg-primaryColor text-white p-2 rounded hover:bg-primaryColor/30",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})})})]})}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[G.map(r=>e.jsx("div",{className:"font-normal py-2 text-center bg-[#F6D5D5] text-secondaryColor rounded-md",children:r},r)),Array.from({length:L}).map((r,o)=>e.jsx("div",{className:"p-2 bg-[#E5D5D9] rounded-md text-center "},`empty-${o}`)),F.map((r,o)=>{const x=d(r,"yyyy-MM-dd"),v=D[x]||[];return e.jsx($,{day:r,todaysEvents:v,handleClick:()=>I(v)},o)}),Array.from({length:O}).map((r,o)=>e.jsx("div",{className:"p-2 bg-[#E5D5D9] rounded-md text-center "},`empty-${o}`))]})]}),e.jsxs("div",{className:"col-span-1 px-4 rounded-lg bg-[#F0F0F0] h-full",children:[e.jsxs("h2",{className:"text-center text-base my-6",children:["~~",Y.meetings]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:a.length>0?d(a[0].date,"yyyy-MM-dd"):m.length>0&&d(m[0].date,"yyyy-MM-dd")}),e.jsxs("select",{className:"bg-primaryColor text-white p-2 rounded-md text-xs",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"JLPT N4",children:"JLPT N4"})]})]}),e.jsx("div",{className:"overflow-y-auto my-5 h-[calc(100vh-250px)] flex flex-col gap-2",children:a.length>0?a.map((r,o)=>e.jsx(w,{event:r},o)):m.length>0?m.map((r,o)=>e.jsx(w,{event:r},o)):e.jsx("p",{className:"text-center text-gray-500 pt-10",children:"No events for this day"})})]})]})]})},q={initial:{opacity:0},animate:{opacity:1,transition:{duration:.2}},exit:{opacity:0,transition:{duration:.2}}};export{se as default};
