import{j as e,r as y}from"./react-Be8E2Nbg.js";import{c as N}from"./clsx-B-dksMZM.js";import{i as b,f as i,s as F,e as A,a as I,g as x,b as P,c as O}from"./date-fns-worQpCLY.js";import{h as B,i as V,L as W,j as q}from"./index-Dk8u_Rj4.js";import{E as M}from"./EventListItem-DMOf6zht.js";import{b as J}from"./@tanstack-DpxyOrws.js";import{u as R}from"./react-redux-DLtmqhOk.js";import{m as _}from"./framer-motion-PqHtkdcW.js";import"./eventemitter3-D17v-3a_.js";import"./react-dom-acXnBvZH.js";import"./scheduler-CzFDRTuY.js";import"./react-router-dom-CFB4Lnko.js";import"./react-router-BCovdx_C.js";import"./@remix-run-CtKGuY17.js";import"./hoist-non-react-statics-DQogQWOa.js";import"./react-is-DcfIKM1A.js";import"./@radix-ui-BvMokElm.js";import"./@floating-ui-Bz0Llzwk.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-CmYz6bu1.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-DARcxseC.js";import"./react-style-singleton-DGHx6cxv.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-Nu0ECe3E.js";import"./use-callback-ref-Dbm6QB5w.js";import"./tailwind-merge-BkWO730n.js";import"./lucide-react-Ci28YqEe.js";import"./@reduxjs-oRZD7waF.js";import"./immer-BNrqi0cU.js";import"./@babel-t4rwdtCy.js";import"./axios-B7bUl2-b.js";import"./react-spinners-YQqZBWX8.js";import"./class-variance-authority-Bb4qSo10.js";import"./moment-G82_0lEo.js";import"./react-quill-DOmGiObD.js";import"./lodash-_8cNgdMq.js";import"./quill-CcmG3z8m.js";import"./react-toastify-Sh6wcm4U.js";import"./@firebase-BRxn6V22.js";import"./idb-BXWtuYvb.js";import"./firebase-Dh9qoGaN.js";import"./redux-persist-Da8jSp2J.js";import"./redux-B4I0dNBv.js";import"./use-sync-external-store-DIPgDpvX.js";const z=({endpoint:r,token:s,key:a,enabled:n})=>{const{data:h,isLoading:l,isError:c,isSuccess:u,error:m,refetch:g}=J({queryKey:[a],queryFn:()=>{if(!s&&!r)throw new Error("Token and endpoint are required");return B({endpoint:r,method:"GET",token:s||void 0})},enabled:!!n||!!s});return{data:h,isLoading:l,isError:c,isSuccess:u,error:m,refetch:g}},$=({day:r,todaysEvents:s,handleClick:a})=>{const n=()=>a(s);return e.jsxs("div",{className:N("h-20 flex flex-col rounded-md items-center justify-center active:scale-90 transition-all duration-100 cursor-pointer ",{"border border-red-400 bg-[#E5D5D9]":b(r),"bg-[#E5D5D9]":!b(r)}),onClick:n,children:[e.jsx("div",{className:N("w-8 h-8 flex items-center justify-center mx-auto"),children:i(r,"d")}),s.length!==0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"bg-primaryColor w-2 h-2 rounded-full"}),s.length>1&&e.jsxs("p",{className:"text-xs text-primaryColor",children:["+",s.length]})]})]})};var D=(r=>(r.APPLICANTS="applicants",r.APPLICANT_DETAIL="applicantDetail",r.JOBS="jobs",r.USERS="users",r.EVENTS="events",r))(D||{});const G=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Je=()=>{const{token:r}=R(t=>t.auth),[s,a]=y.useState(new Date),[n,h]=y.useState([]),l=F(s),c=A(s),{data:u,isLoading:m,isError:g,isSuccess:Y,error:H}=z({endpoint:V.EVENTS,token:r,key:D.EVENTS}),j=u||[],w=i(new Date,"yyyy-MM-dd"),f=y.useMemo(()=>j.reduce((t,o)=>{const d=i(new Date(o.date),"yyyy-MM-dd");return t[d]||(t[d]=[]),t[d].push(o),t},{}),[j]),p=f[w]||[],E=()=>a(P(s,1)),C=()=>a(O(s,1)),S=I({start:l,end:c}),k=x(l)===0?6:x(l)-1,T=x(c)===0?0:7-x(c),L=t=>h(t);return e.jsxs(e.Fragment,{children:[m&&e.jsx(W,{isLoading:m,className:"h-[calc(100vh-68px)]"}),e.jsxs(_.div,{variants:U,initial:"initial",animate:"animate",exit:"exit",className:"w-full  grid grid-cols-3 gap-x-4 p-4",children:[e.jsxs("div",{className:"col-span-2 rounded-lg bg-[#F0F0F0] p-4 shadow-lg",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[e.jsx("button",{onClick:C,className:"bg-primaryColor text-white p-2 rounded hover:bg-primaryColor/30",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})})}),e.jsx("h2",{className:"text-center text-xl",children:i(s,"MMMM yyyy")}),e.jsx("button",{onClick:E,className:"bg-primaryColor text-white p-2 rounded hover:bg-primaryColor/30",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})})})]})}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[G.map(t=>e.jsx("div",{className:"font-normal py-2 text-center bg-[#F6D5D5] text-secondaryColor rounded-md",children:t},t)),Array.from({length:k}).map((t,o)=>e.jsx("div",{className:"p-2 bg-[#E5D5D9] rounded-md text-center "},`empty-${o}`)),S.map((t,o)=>{const d=i(t,"yyyy-MM-dd"),v=f[d]||[];return e.jsx($,{day:t,todaysEvents:v,handleClick:()=>L(v)},o)}),Array.from({length:T}).map((t,o)=>e.jsx("div",{className:"p-2 bg-[#E5D5D9] rounded-md text-center "},`empty-${o}`))]})]}),e.jsxs("div",{className:"col-span-1 px-4 rounded-lg bg-[#F0F0F0] h-full",children:[e.jsxs("h2",{className:"text-center text-base my-6",children:["~~",q.meetings]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:n.length>0?i(n[0].date,"yyyy-MM-dd"):p.length>0&&i(p[0].date,"yyyy-MM-dd")}),e.jsxs("select",{className:"bg-primaryColor text-white p-2 rounded-md text-xs",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"JLPT N4",children:"JLPT N4"})]})]}),e.jsx("div",{className:"overflow-y-auto my-5 h-[calc(100vh-250px)] flex flex-col gap-2",children:n.length>0?n.map((t,o)=>e.jsx(M,{event:t},o)):p.length>0?p.map((t,o)=>e.jsx(M,{event:t},o)):e.jsx("p",{className:"text-center text-gray-500 pt-10",children:"No events for this day"})})]})]})]})},U={initial:{opacity:0},animate:{opacity:1,transition:{duration:.2}},exit:{opacity:0,transition:{duration:.2}}};export{Je as default};
