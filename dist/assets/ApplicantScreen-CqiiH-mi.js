import{E as e,O as r,V as R,r as m,a8 as L,I as J,a9 as M,J as z,aa as S,Q as f,a0 as A,M as y,L as F,N as P,S as W,T as U,U as D,a7 as B}from"./index-DgIL6vzg.js";import{e as $}from"./eye-open-white-DZIpFa4F.js";import{S as V,a as g}from"./index-CCVGW56o.js";import{U as G,M as O}from"./UserProfileSkeleton-qdfGq1O5.js";const q=({applicants:h,handleDetail:c,jobTypes:o,loading:n})=>{const s=t=>{const l=o==null?void 0:o.data.find(a=>a.id===t);return l?l.job_type_jp:"Unknown"};return e.jsx("div",{className:"relative overflow-y-auto h-[calc(100vh-200px)]",children:e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-gray-900 uppercase dark:text-gray-400 sticky top-0 bg-white z-40",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:" py-3 text-start pl-5",children:r.id}),e.jsx("th",{scope:"col",className:"py-3 text-start",children:r.name}),e.jsx("th",{scope:"col",className:" py-3 text-start",children:r.preferJob}),e.jsx("th",{scope:"col",className:" py-3 text-start w-[15%]",children:r.address}),e.jsx("th",{scope:"col",className:" py-3 text-start",children:r.education}),e.jsx("th",{scope:"col",className:" py-3 text-start",children:r.language}),e.jsx("th",{scope:"col",className:" py-3 text-start",children:r.level}),e.jsx("th",{scope:"col",className:"py-3 text-start",children:r.gender}),e.jsx("th",{scope:"col",className:" py-3 text-start",children:r.view})]})}),e.jsx("tbody",{className:"overflow-y-auto ",children:n?Array.from({length:5}).map((t,l)=>e.jsx(K,{},l)):h.length>0?h.map((t,l)=>e.jsxs("tr",{className:"odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b dark:border-gray-700",children:[e.jsx("td",{className:" py-2 text-start pl-5",children:e.jsx("img",{src:t.m_basicinfos.profile_path?`https://api.japanjob.exbrainedu.com/v1/file/photo/${t.m_basicinfos.profile_path}`:R,alt:"profile",className:"w-10 h-10 rounded-full",crossOrigin:"anonymous"})}),e.jsxs("th",{scope:"row",className:" py-2 text-start font-medium text-gray-900 whitespace-nowrap dark:text-white",children:[e.jsx("p",{className:"text-xs",children:t.m_basicinfos.name}),e.jsx("p",{className:"text-xs font-light text-gray-500",children:t.m_basicinfos.user_id})]}),e.jsx("td",{"data-tooltip-target":"tooltip-default",className:"relative group py-2  flex flex-col items-start justify-center gap-1 cursor-pointer",children:e.jsx("div",{className:"flex flex-col items-center  justify-center gap-1 cursor-pointer",children:t.m_preferred_jobs.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex  items-center justify-start gap-1 cursor-pointer",children:[e.jsx("p",{className:"text-xs  text-white font-normal bg-primaryColor rounded-md px-2 py-1 inline-block",children:s(t.m_preferred_jobs[0].job_type)}),t.m_preferred_jobs.length>1&&e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["+",t.m_preferred_jobs.length-1]})]}),t.m_preferred_jobs.length>1&&e.jsx("div",{className:"absolute invisible group-hover:visible z-50 bg-white border border-gray-200 rounded-md shadow-lg p-2 mt-1  left-10 ml-2",children:t.m_preferred_jobs.slice(1).map((a,d)=>e.jsx("p",{className:"text-xs text-gray-700 whitespace-nowrap my-2",children:s(a.job_type)},d))})]}):e.jsx("div",{className:"text-xs text-gray-500",children:r.noPreferredJobs})})}),e.jsx("td",{className:"py-2 text-xs text-start text-gray-500",children:t.m_basicinfos.live_in_japan===1?r.japan:r.myanmar}),e.jsx("td",{children:e.jsx("div",{"data-tooltip-target":"tooltip-default",className:"relative group py-2  flex flex-col items-start justify-center gap-1 cursor-pointer",children:t.m_education.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex  items-center justify-start gap-1 cursor-pointer",children:[e.jsx("p",{className:"text-xs",children:t.m_education[0].major}),t.m_education.length>1&&e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["+",t.m_education.length-1]})]}),t.m_education.length>1&&e.jsx("div",{className:"absolute invisible group-hover:visible z-50 bg-white border border-gray-200 rounded-md shadow-lg p-2 mt-1  left-10 ml-2",children:t.m_education.slice(1).map((a,d)=>e.jsx("p",{className:"text-xs text-gray-700 whitespace-nowrap my-2",children:a.major},d))})]}):e.jsx("div",{className:"text-xs text-gray-500",children:r.noEducation})})}),e.jsx("td",{children:e.jsx("div",{"data-tooltip-target":"tooltip-default",className:"relative group py-2  flex flex-col items-start justify-center gap-1 cursor-pointer",children:t.m_language_exams.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex  items-center justify-start gap-1 cursor-pointer",children:[e.jsx("p",{className:"text-xs",children:t.m_language_exams[0].m_exams.name_jp}),t.m_language_exams.length>1&&e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["+",t.m_language_exams.length-1]})]}),t.m_language_exams.length>1&&e.jsx("div",{className:"absolute invisible group-hover:visible z-50 bg-white border border-gray-200 rounded-md shadow-lg p-2 mt-1  left-10 ml-2",children:t.m_language_exams.slice(1).map((a,d)=>e.jsx("p",{className:"text-xs text-gray-700 whitespace-nowrap my-2",children:a.m_exams.name_jp},d))})]}):e.jsx("div",{className:"text-xs text-gray-500",children:r.noTokutei})})}),e.jsx("td",{children:e.jsx("div",{"data-tooltip-target":"tooltip-default",className:"relative group py-2  flex flex-col items-start justify-center gap-1 cursor-pointer",children:t.m_language_exams.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex  items-center justify-start gap-1 cursor-pointer",children:[e.jsx("p",{className:"text-xs",children:t.m_language_exams[0].m_exam_levels.level}),t.m_language_exams.length>1&&e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["+",t.m_language_exams.length-1]})]}),t.m_language_exams.length>1&&e.jsx("div",{className:"absolute invisible group-hover:visible z-50 bg-white border border-gray-200 rounded-md shadow-lg p-2 mt-1  left-10 ml-2",children:t.m_language_exams.slice(1).map((a,d)=>e.jsx("p",{className:"text-xs text-gray-700 whitespace-nowrap my-2",children:a.m_exam_levels.level},d))})]}):e.jsx("div",{className:"text-xs text-gray-500",children:r.noJapanese})})}),e.jsx("td",{className:" p-2 text-start text-secondaryColor",children:e.jsx("p",{className:"text-xs text-gray-500",children:t.m_basicinfos.gender===0?r.male:r.female})}),e.jsx("td",{className:" py-2 text-start text-secondaryColor",children:e.jsxs("button",{onClick:()=>c(t.id),className:"text-xs text-white bg-primaryColor rounded-md px-2 py-1 hover:bg-secondaryColor",children:[e.jsx("img",{src:$,alt:"eye",className:"w-4 h-4 mr-2 inline-block text-gray-500"}),r.view]})})]},l)):e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"text-gray-500 pt-40",children:e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs("svg",{width:"152px",height:"152px",viewBox:"0 0 24.00 24.00",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),e.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",e.jsx("path",{opacity:"0.4",d:"M17.9981 7.16C17.9381 7.15 17.8681 7.15 17.8081 7.16C16.4281 7.11 15.3281 5.98 15.3281 4.58C15.3281 3.15 16.4781 2 17.9081 2C19.3381 2 20.4881 3.16 20.4881 4.58C20.4781 5.98 19.3781 7.11 17.9981 7.16Z",stroke:"#292D32",strokeWidth:"0.672",strokeLinecap:"round",strokeLinejoin:"round"})," ",e.jsx("path",{opacity:"0.4",d:"M16.9675 14.4402C18.3375 14.6702 19.8475 14.4302 20.9075 13.7202C22.3175 12.7802 22.3175 11.2402 20.9075 10.3002C19.8375 9.59016 18.3075 9.35016 16.9375 9.59016",stroke:"#292D32",strokeWidth:"0.672",strokeLinecap:"round",strokeLinejoin:"round"})," ",e.jsx("path",{opacity:"0.4",d:"M5.96656 7.16C6.02656 7.15 6.09656 7.15 6.15656 7.16C7.53656 7.11 8.63656 5.98 8.63656 4.58C8.63656 3.15 7.48656 2 6.05656 2C4.62656 2 3.47656 3.16 3.47656 4.58C3.48656 5.98 4.58656 7.11 5.96656 7.16Z",stroke:"#292D32",strokeWidth:"0.672",strokeLinecap:"round",strokeLinejoin:"round"})," ",e.jsx("path",{opacity:"0.4",d:"M6.9975 14.4402C5.6275 14.6702 4.1175 14.4302 3.0575 13.7202C1.6475 12.7802 1.6475 11.2402 3.0575 10.3002C4.1275 9.59016 5.6575 9.35016 7.0275 9.59016",stroke:"#292D32",strokeWidth:"0.672",strokeLinecap:"round",strokeLinejoin:"round"})," ",e.jsx("path",{d:"M12.0001 14.6302C11.9401 14.6202 11.8701 14.6202 11.8101 14.6302C10.4301 14.5802 9.33008 13.4502 9.33008 12.0502C9.33008 10.6202 10.4801 9.47021 11.9101 9.47021C13.3401 9.47021 14.4901 10.6302 14.4901 12.0502C14.4801 13.4502 13.3801 14.5902 12.0001 14.6302Z",stroke:"#292D32",strokeWidth:"0.672",strokeLinecap:"round",strokeLinejoin:"round"})," ",e.jsx("path",{d:"M9.0907 17.7804C7.6807 18.7204 7.6807 20.2603 9.0907 21.2003C10.6907 22.2703 13.3107 22.2703 14.9107 21.2003C16.3207 20.2603 16.3207 18.7204 14.9107 17.7804C13.3207 16.7204 10.6907 16.7204 9.0907 17.7804Z",stroke:"#292D32",strokeWidth:"0.672",strokeLinecap:"round",strokeLinejoin:"round"})," "]})]})}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("p",{className:"text-gray-500 text-lg",children:r.noApplicants})})]})})})})]})})},Q=({className:h,filter:c,setFilter:o,jobTypes:n,setCurrentPage:s})=>{const t=m.useRef(!0),l=m.useRef(!0),a=()=>t.current&&l.current||!t.current&&!l.current?"":t.current&&!l.current?"0":"1",d=[{label:r.liveInMyanmar,value:2},{label:r.liveInJapan,value:1}];return e.jsxs("div",{className:`bg-white justify-end text-secondaryColor px-4 flex flex-col sm:flex-row sm:items-center gap-4 ${h}`,children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(L,{name:"gender",id:"male",defaultChecked:!0,onChange:i=>{s(1),i?t.current=!0:t.current=!1,o({...c,gender:a()})}}),e.jsx("label",{htmlFor:"male",className:"cursor-pointer",children:r.male})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(L,{name:"gender",id:"female",defaultChecked:!0,onChange:i=>{s(1),i?l.current=!0:l.current=!1,o({...c,gender:a()})}}),e.jsx("label",{htmlFor:"female",className:"cursor-pointer",children:r.female})]}),e.jsxs("select",{"aria-label":"国",title:"国",className:"bg-secondaryColor text-white p-2 rounded-md text-sm w-fit cursor-pointer",onChange:i=>{s(1),o({...c,live_in_japan:i.target.value})},children:[e.jsx("option",{value:"",autoFocus:!0,children:r.chooseCountry}),d.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))]}),e.jsxs("select",{"aria-label":"職種",title:"職種",className:"bg-secondaryColor text-white p-2 rounded-md text-sm w-fit cursor-pointer",onChange:i=>{s(1),o({...c,job_type:i.target.value})},children:[e.jsx("option",{value:"",children:r.jobType}),n&&n.data.length>0&&n.data.map(i=>e.jsx("option",{value:i.id,children:i.job_type_jp},i.id))]})]})},Z=({totalPages:h,currentPage:c,setCurrentPage:o})=>{const n=s=>{s>=1&&s<=h&&o(s)};return e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3",children:[e.jsx("button",{title:"前へ",onClick:()=>n(c-1),disabled:c===1,className:"bg-secondaryColor rounded-md w-10 h-10 flex items-center justify-center text-white",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})})}),Array.from({length:h},(s,t)=>e.jsx("button",{title:`${t+1}ページ`,onClick:()=>n(t+1),className:c===t+1?"active bg-secondaryColor rounded-md w-10 h-10 flex items-center justify-center text-white":"bg-secondaryColor rounded-md w-10 h-10 flex items-center justify-center text-white",children:t+1},t)),e.jsx("button",{title:"次へ",onClick:()=>n(c+1),disabled:c===h,className:"bg-secondaryColor rounded-md w-10 h-10 flex items-center justify-center text-white",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})})})]})},K=()=>e.jsx(V,{baseColor:"#d6d6d6",highlightColor:"#edeceb",children:e.jsxs("tr",{className:"h-14 odd:bg-white  odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b dark:border-gray-700",children:[e.jsx("td",{className:"text-center",children:e.jsx(g,{circle:!0,height:40,width:40})}),e.jsx("td",{children:e.jsx(g,{height:10,width:120})}),e.jsx("td",{children:e.jsx(g,{height:10,width:150})}),e.jsx("td",{children:e.jsx(g,{height:10,width:80})}),e.jsx("td",{children:e.jsx(g,{height:10,width:100})}),e.jsx("td",{children:e.jsx(g,{height:10,width:80})}),e.jsx("td",{children:e.jsx(g,{height:10,width:50})}),e.jsx("td",{children:e.jsx(g,{height:10,width:50})}),e.jsx("td",{children:e.jsx(g,{height:30,width:50})})]})}),Y={live_in_japan:"",gender:"",job_type:""},ae=()=>{const h=J(),o=M().state,{token:n}=z(u=>u.auth),[s,t]=m.useState(Y),l=m.useRef(!0),[a,d]=m.useState(1),[i,b]=m.useState(!1),[p,T]=m.useState(null),E=()=>{const u=new URLSearchParams;return s.live_in_japan!==""&&u.append("live_in_japan",s.live_in_japan),s.gender!==""&&u.append("gender",s.gender),s.job_type!==""&&u.append("job_type",s.job_type),a>0&&u.append("page",a.toString()),u.toString()},{data:x,isLoading:I,refetch:v}=S({queryKey:[f.APPLICANTS,a,s],queryFn:()=>A({endpoint:`${y.APPLICANTS}?${E()}`,method:"GET",token:n}),enabled:!!n&&!!a&&!!s.live_in_japan&&!!s.gender&&!!s.job_type}),{data:_,isLoading:w}=F({endpoint:y.JOB_TYPES,key:f.JOB_TYPES,token:n}),{data:j,isLoading:N}=S({queryKey:[f.APPLICANT_DETAIL,p],queryFn:()=>p?A({endpoint:`${y.USER_DETAILS}/${p}`,method:"GET",token:n}):[],enabled:!!p&&i}),k=(x==null?void 0:x.data.users)||[],C=u=>{T(u),b(!0)};return m.useEffect(()=>{l.current&&(l.current=!1),(n||a||s.live_in_japan||s.gender||s.job_type)&&v()},[a,s,v,n]),m.useEffect(()=>{h(P(r.applicant))},[h]),m.useEffect(()=>{o&&C(o.jobfinder_id)},[o]),e.jsxs(e.Fragment,{children:[e.jsx(W,{children:e.jsxs("title",{children:[r.applicant," - Japan Job"]})}),w&&e.jsx("div",{className:"relative ",children:e.jsx(U,{isLoading:w,className:"h-[calc(100vh-68px)] left-0 top-0 z-50"})}),e.jsxs(D.main,{variants:H,initial:"initial",animate:"animate",exit:"exit",className:"w-full overflow-hidden relative",children:[e.jsx(Q,{filter:s,setFilter:t,jobTypes:_,setCurrentPage:d}),e.jsx("div",{className:"flex justify-start items-center px-4 py-2 z-10",children:e.jsxs("p",{className:"text-gray-500 text-sm",children:[r.searchResult," ",e.jsxs("span",{className:"text-secondaryColor",children:["(",(x==null?void 0:x.data.totalUsers)||0,")"]})]})}),e.jsx(q,{applicants:k,handleDetail:C,jobTypes:_,loading:I}),k.length>0&&e.jsx(Z,{totalPages:x==null?void 0:x.data.totalPages,currentPage:x==null?void 0:x.data.currentPage,setCurrentPage:d}),e.jsx(B,{children:(i||N)&&e.jsxs(D.div,{className:"absolute top-0 left-0 bg-white w-full h-full z-50 flex justify-center items-center",variants:X,initial:"initial",animate:"animate",exit:"exit",children:[N?e.jsx(G,{}):e.jsx(O,{applicantDetail:j==null?void 0:j.data,className:"h-full w-full overflow-y-auto"}),e.jsx("button",{onClick:()=>b(!1),className:"absolute top-3 left-3  bg-white w-10 h-10 rounded-full flex justify-center items-center text-secondaryColor",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})})})]})})]})]})},H={initial:{opacity:0},animate:{opacity:1,transition:{duration:.2}},exit:{opacity:0,transition:{duration:.2}}},X={initial:{opacity:0,x:100},animate:{opacity:1,x:0,transition:{duration:.2}},exit:{opacity:0,x:100,transition:{duration:.2}}};export{ae as default};
