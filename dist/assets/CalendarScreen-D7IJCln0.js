import{j as t,r as x}from"./react-Be8E2Nbg.js";import{c as j}from"./clsx-B-dksMZM.js";import{i as f,f as o,s as L,e as S,a as T,g as c,b as I,c as O}from"./date-fns-worQpCLY.js";import{a as A,L as W,j as B}from"./index-BnyY0suS.js";import{E as v}from"./EventListItem-DMOf6zht.js";import{u as K}from"./useFetch-CuVI8TKe.js";import{u as P}from"./react-redux-DLtmqhOk.js";import{m as z}from"./framer-motion-PqHtkdcW.js";import"./eventemitter3-D17v-3a_.js";import"./react-dom-acXnBvZH.js";import"./scheduler-CzFDRTuY.js";import"./@tanstack-DpxyOrws.js";import"./react-router-dom-CFB4Lnko.js";import"./react-router-BCovdx_C.js";import"./@remix-run-CtKGuY17.js";import"./hoist-non-react-statics-DQogQWOa.js";import"./react-is-DcfIKM1A.js";import"./@radix-ui-BvMokElm.js";import"./@floating-ui-Bz0Llzwk.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-CmYz6bu1.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-DARcxseC.js";import"./react-style-singleton-DGHx6cxv.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-Nu0ECe3E.js";import"./use-callback-ref-Dbm6QB5w.js";import"./tailwind-merge-BkWO730n.js";import"./lucide-react-Ci28YqEe.js";import"./@reduxjs-oRZD7waF.js";import"./immer-BNrqi0cU.js";import"./@babel-t4rwdtCy.js";import"./axios-B7bUl2-b.js";import"./react-spinners-YQqZBWX8.js";import"./class-variance-authority-Bb4qSo10.js";import"./moment-G82_0lEo.js";import"./react-quill-DOmGiObD.js";import"./lodash-_8cNgdMq.js";import"./quill-CcmG3z8m.js";import"./@firebase-BRxn6V22.js";import"./idb-BXWtuYvb.js";import"./firebase-Dh9qoGaN.js";import"./redux-persist-Da8jSp2J.js";import"./redux-B4I0dNBv.js";import"./use-sync-external-store-DIPgDpvX.js";const J=({day:n,todaysEvents:s,handleClick:a})=>t.jsxs("div",{className:j("h-20 flex flex-col rounded-md items-center justify-center active:scale-90 transition-all duration-100 cursor-pointer ",{"border border-red-400 bg-[#E5D5D9]":f(n),"bg-[#E5D5D9]":!f(n)}),onClick:()=>a(s),children:[t.jsx("div",{className:j("w-8 h-8 flex items-center justify-center mx-auto"),children:o(n,"d")}),s.length!==0&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"bg-primaryColor w-2 h-2 rounded-full"}),s.length>1&&t.jsxs("p",{className:"text-xs text-primaryColor",children:["+",s.length]})]})]}),R=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Kt=()=>{const{token:n}=P(e=>e.auth),[s,a]=x.useState(new Date),[l,N]=x.useState([]),d=L(s),p=S(s),{data:M,isLoading:h,isError:_,isSuccess:$,error:Y}=K({endpoint:A.EVENTS,token:n,key:"events"}),u=M||[],b=()=>{a(I(s,1))},D=()=>{a(O(s,1))},w=T({start:d,end:p}),C=c(d)===0?6:c(d)-1,k=c(p)===0?0:7-c(p),y=x.useMemo(()=>u.reduce((e,r)=>{const i=o(new Date(r.date),"yyyy-MM-dd");return e[i]||(e[i]=[]),e[i].push(r),e},{}),[u]),E=o(new Date,"yyyy-MM-dd"),m=y[E]||[],F=e=>{N(e)};return t.jsxs(t.Fragment,{children:[h&&t.jsx(W,{isLoading:h,className:"h-[calc(100vh-68px)]"}),t.jsxs(z.div,{variants:V,initial:"initial",animate:"animate",exit:"exit",className:"w-full  grid grid-cols-3 gap-x-4 p-4",children:[t.jsxs("div",{className:"col-span-2 rounded-lg bg-[#F0F0F0] p-4 shadow-lg",children:[t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[t.jsx("button",{onClick:D,className:"bg-primaryColor text-white p-2 rounded hover:bg-primaryColor/30",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})})}),t.jsx("h2",{className:"text-center text-xl",children:o(s,"MMMM yyyy")}),t.jsx("button",{onClick:b,className:"bg-primaryColor text-white p-2 rounded hover:bg-primaryColor/30",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})})})]})}),t.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[R.map(e=>t.jsx("div",{className:"font-normal py-2 text-center bg-[#F6D5D5] text-secondaryColor rounded-md",children:e},e)),Array.from({length:C}).map((e,r)=>t.jsx("div",{className:"p-2 bg-[#E5D5D9] rounded-md text-center "},`empty-${r}`)),w.map((e,r)=>{const i=o(e,"yyyy-MM-dd"),g=y[i]||[];return t.jsx(J,{day:e,todaysEvents:g,handleClick:()=>F(g)},r)}),Array.from({length:k}).map((e,r)=>t.jsx("div",{className:"p-2 bg-[#E5D5D9] rounded-md text-center "},`empty-${r}`))]})]}),t.jsxs("div",{className:"col-span-1 px-4 rounded-lg bg-[#F0F0F0] h-full",children:[t.jsxs("h2",{className:"text-center text-base my-6",children:["~~",B.meetings]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("p",{className:"text-sm text-gray-500",children:l.length>0?o(l[0].date,"yyyy-MM-dd"):m.length>0&&o(m[0].date,"yyyy-MM-dd")}),t.jsxs("select",{className:"bg-primaryColor text-white p-2 rounded-md text-xs",children:[t.jsx("option",{value:"all",children:"All"}),t.jsx("option",{value:"JLPT N4",children:"JLPT N4"})]})]}),t.jsx("div",{className:"overflow-y-auto my-5 h-[calc(100vh-250px)] flex flex-col gap-2",children:l.length>0?l.map((e,r)=>t.jsx(v,{event:e},r)):m.length>0?m.map((e,r)=>t.jsx(v,{event:e},r)):t.jsx("p",{className:"text-center text-gray-500 pt-10",children:"No events for this day"})})]})]})]})},V={initial:{opacity:0},animate:{opacity:1,transition:{duration:.2}},exit:{opacity:0,transition:{duration:.2}}};export{Kt as default};
